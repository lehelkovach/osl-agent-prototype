<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Checkout - Payment Form</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 500px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        button { background: #4CAF50; color: white; padding: 12px 20px; border: none; border-radius: 4px; cursor: pointer; width: 100%; font-size: 16px; }
        button:hover { background: #45a049; }
        .error { color: red; padding: 10px; background: #ffe0e0; border-radius: 4px; display: none; }
        .success { color: green; padding: 10px; background: #e0ffe0; border-radius: 4px; display: none; }
        .row { display: flex; gap: 10px; }
        .row .form-group { flex: 1; }
        h1 { color: #333; }
        #result { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Test Checkout</h1>
    <p>Enter your payment details below:</p>
    
    <form id="checkout-form">
        <div class="form-group">
            <label for="card-name">Name on Card</label>
            <input type="text" id="card-name" name="card_name" placeholder="John Doe" required>
        </div>
        
        <div class="form-group">
            <label for="card-number">Card Number</label>
            <input type="text" id="card-number" name="card_number" placeholder="4242 4242 4242 4242" required maxlength="19">
        </div>
        
        <div class="row">
            <div class="form-group">
                <label for="expiry">Expiry (MM/YY)</label>
                <input type="text" id="expiry" name="expiry" placeholder="12/28" required maxlength="5">
            </div>
            <div class="form-group">
                <label for="cvv">CVV</label>
                <input type="text" id="cvv" name="cvv" placeholder="123" required maxlength="4">
            </div>
        </div>
        
        <div class="form-group">
            <label for="billing-address">Billing Address</label>
            <input type="text" id="billing-address" name="billing_address" placeholder="123 Main St" required>
        </div>
        
        <div class="row">
            <div class="form-group">
                <label for="city">City</label>
                <input type="text" id="city" name="city" placeholder="San Francisco" required>
            </div>
            <div class="form-group">
                <label for="state">State</label>
                <input type="text" id="state" name="state" placeholder="CA" required maxlength="2">
            </div>
        </div>
        
        <div class="row">
            <div class="form-group">
                <label for="zip">ZIP Code</label>
                <input type="text" id="zip" name="zip" placeholder="94102" required maxlength="10">
            </div>
            <div class="form-group">
                <label for="country">Country</label>
                <input type="text" id="country" name="country" placeholder="US" required maxlength="2">
            </div>
        </div>
        
        <button type="submit" id="submit-btn">Pay $99.99</button>
    </form>
    
    <div id="result">
        <div class="error" id="error-msg"></div>
        <div class="success" id="success-msg"></div>
    </div>

    <script>
        // Test card validation - simulates payment processor response
        const validCards = {
            '4242424242424242': 'success',  // Stripe test success card
            '4000000000000002': 'declined', // Stripe test decline card
            '4000000000009995': 'insufficient_funds',
            '4000000000000069': 'expired_card'
        };
        
        document.getElementById('checkout-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const cardNumber = document.getElementById('card-number').value.replace(/\s/g, '');
            const errorMsg = document.getElementById('error-msg');
            const successMsg = document.getElementById('success-msg');
            
            // Hide previous messages
            errorMsg.style.display = 'none';
            successMsg.style.display = 'none';
            
            // Simulate processing delay
            document.getElementById('submit-btn').textContent = 'Processing...';
            document.getElementById('submit-btn').disabled = true;
            
            setTimeout(() => {
                const result = validCards[cardNumber];
                
                if (result === 'success') {
                    successMsg.textContent = '✓ Payment successful! Order confirmed. Transaction ID: TXN-' + Date.now();
                    successMsg.style.display = 'block';
                    document.body.classList.add('payment-success');
                } else if (result === 'declined') {
                    errorMsg.textContent = '✗ Card declined. Please try a different card or contact your bank.';
                    errorMsg.style.display = 'block';
                    document.body.classList.add('payment-failed');
                } else if (result === 'insufficient_funds') {
                    errorMsg.textContent = '✗ Insufficient funds. Please try a different card.';
                    errorMsg.style.display = 'block';
                    document.body.classList.add('payment-failed');
                } else if (result === 'expired_card') {
                    errorMsg.textContent = '✗ Card has expired. Please use a valid card.';
                    errorMsg.style.display = 'block';
                    document.body.classList.add('payment-failed');
                } else {
                    errorMsg.textContent = '✗ Invalid card number. Please check and try again.';
                    errorMsg.style.display = 'block';
                    document.body.classList.add('payment-failed');
                }
                
                document.getElementById('submit-btn').textContent = 'Pay $99.99';
                document.getElementById('submit-btn').disabled = false;
            }, 1500);
        });
        
        // Format card number with spaces
        document.getElementById('card-number').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s/g, '').replace(/\D/g, '');
            let formatted = value.match(/.{1,4}/g)?.join(' ') || value;
            e.target.value = formatted;
        });
        
        // Format expiry
        document.getElementById('expiry').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 2) {
                value = value.slice(0,2) + '/' + value.slice(2);
            }
            e.target.value = value;
        });
    </script>
</body>
</html>
